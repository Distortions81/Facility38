#HELPFUL INFO
-tags=ebitenginedebug
export EBITENGINE_INTERNAL_IMAGES_KEY=Q
alias gbuild="go build -ldflags=\"-s -w -X main.buildTime=`date -u '+%Y%m%d%H%M%S'`\" && ./GameTest"


High priority:
Hoppers
Timers, pressure switches, item spilling.
Add to mined list: spilled items.
Add TotalMined to save/load
make totalmined map for quick rendering, rebuild on load.

Make array for input and output ports,
To reduce testing unlinked ports.
add on-link function for objects.

Add ground water and surface water. Mineralized, fresh and salt.
Water should get contaminated by dumping.

Multi-tile objects, ABCDEF port format. Use modulo rotation.
Fix overs not showing mats when rotated (use rotation to get correct input)
obj-tock.go: Cut down code in tock, move anything we can to init.

Read should be faster than write, because of CPU caches...
We should always read the material type, and only reset typeP if need be.
remove unneeded port == nil checks, etc.

Other:
eventually set machine times in ms/sec
Add ground rendering for pixel mode too
Complete unsafe for faster loading, make packed binary format for saves.
Minimize nested ifs
adjustable miners/furnace speeds


MULTI-TILE:
List of tiles, in local x/y cords. -2,-2 to 2,2 etc.
Rotation works as expected:  (use 0,0 for center of rotation)

0: x,y
1: -y, x
2: -x, -y
3: y, -x

Directions can work, with multiple of each direction or by checking children? N1 N2 N3 N4
We should make multi-tiles have a parent pointer. Maybe a sep map with a child type.
Then when we draw, if there is a parent we draw parent ONLY.
to prevent the need to search, and to prevent pop.

Not sure how to tally that, maybe in vis-check update?

On rotate or delete, remove all children from map, make new map based on rotation and then place and re-link.
We will need to check for space for non-square objects.
also rotate ports as usual.

Show ghost preview when item is selected for placing.

*** Fix saving breaking item links ***
Finish multi-tile