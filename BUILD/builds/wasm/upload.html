<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript">
      const go = new Go();
      WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject).then((result) => {
        go.run(result.instance);
      });
    </script>
  </head>
  <body>
    <input type="file" id="file-input">
    <button id="submit-button">Submit</button>
    <script type="text/javascript">
      const submitButton = document.getElementById("submit-button");
      submitButton.addEventListener("click", () => {
        const fileInput = document.getElementById("file-input");
        const file = fileInput.files[0];
        const reader = new FileReader();
        reader.readAsArrayBuffer(file);
        reader.onloadend = () => {
          const buffer = new Uint8Array(reader.result);
          const result = Module.sendFile(buffer);
          console.log(result);
        };
      });
    </script>
  </body>
</html>
