<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript">
      const go = new Go();
      WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject).then((result) => {
        go.run(result.instance);
      });
    </script>
  </head>
  <body>
    <button id="download-button">Download File</button>
    <script type="text/javascript">
      const downloadButton = document.getElementById("download-button");
      downloadButton.addEventListener("click", () => {
        const result = Module.generateFile();
        const blob = new Blob([result], {type: "application/octet-stream"});
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.style.display = "none";
        a.href = url;
        a.download = "sample.txt";
        document.body.appendChild(a);
        a.click();
        setTimeout(() => {
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        }, 100);
      });
    </script>
  </body>
</html>